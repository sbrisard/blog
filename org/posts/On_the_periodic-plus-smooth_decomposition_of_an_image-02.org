# -*- coding: utf-8; -*-
#+SETUPFILE: "../include/css-1.org"
#+TITLE: On the periodic-plus-smooth decomposition of an image, part 2: defining the decomposition
#+DATE: [2017-10-02 Mon]
#+PROPERTY: header-args:ipython :session :eval no-export :exports both

#+HEADER: :var DATA_DIR=(cdr (assoc "sb-blog-data-dir" org-link-abbrev-alist-local))
#+BEGIN_SRC ipython :results output
  import numpy as np
  import scipy.misc

  u = scipy.misc.imread(DATA_DIR+'hut-648x364.png')
  u = u.astype(np.float64)

  from moisan2011 import per_ref as per
  p = per(u, inverse_fft=True)
  s = u-p

  p = p.astype(np.uint8)
  s_min, s_ptp = s.min(), s.ptp()
  s = (255*(s-s_min)/s_ptp).astype(np.uint8)

  scipy.misc.imsave(DATA_DIR+'hut-648x364-periodic.png', p)
  scipy.misc.imsave(DATA_DIR+'hut-648x364-smooth.png', s)
  scipy.misc.imsave(DATA_DIR+'hut-648x364-periodic-fftshift.png',
                    np.fft.fftshift(p))
#+END_SRC

#+RESULTS:

# Local Variables:
# eval: (sb-blog-init-data-dir)
# fill-column: 80
# End:
